{
    "projectName": "Remove Unused Deduplication Types",
    "branchName": "ralph/tasks",
    "language": "python",
    "standardsFile": "ralph/standards/python.md",
    "description": "Remove unused Promotion, Alignment, and FlaggedForReview types from the deduplication module and simplify the deduplication agent prompt",
    "userStories": [
        {
            "id": "US-011",
            "title": "Remove Promotion, Alignment, and FlaggedForReview classes from deduplication types",
            "description": "Delete the unused Pydantic model classes (Promotion, Alignment, FlaggedForReview) from the deduplication types module and remove the corresponding fields from DeduplicationResult",
            "acceptanceCriteria": [
                "Promotion class is deleted from src/atlas/src/atlas/types/deduplication.py",
                "Alignment class is deleted from src/atlas/src/atlas/types/deduplication.py",
                "FlaggedForReview class is deleted from src/atlas/src/atlas/types/deduplication.py",
                "DeduplicationResult no longer has promotions field",
                "DeduplicationResult no longer has alignments field",
                "DeduplicationResult no longer has flagged_for_review field",
                "No TODO or FIXME comments left in code",
                "All existing tests pass",
                "Build succeeds with no warnings"
            ],
            "testCases": [
                "DeduplicationResult_WithoutRemovedFields_ShouldSerializeCorrectly - Verify DeduplicationResult serializes without promotions/alignments/flagged_for_review",
                "DeduplicationResult_Create_ShouldNotRequireRemovedFields - Verify DeduplicationResult can be instantiated without the removed fields"
            ],
            "priority": 1,
            "passes": false,
            "notes": "This is a straightforward deletion. The classes and fields are write-only and never read anywhere in the codebase.",
            "dependencies": []
        },
        {
            "id": "US-012",
            "title": "Remove deleted class exports from types __init__.py",
            "description": "Update the types module __init__.py to remove exports for the deleted Promotion, Alignment, and FlaggedForReview classes",
            "acceptanceCriteria": [
                "Promotion is not exported from src/atlas/src/atlas/types/__init__.py",
                "Alignment is not exported from src/atlas/src/atlas/types/__init__.py",
                "FlaggedForReview is not exported from src/atlas/src/atlas/types/__init__.py",
                "No import errors when importing from atlas.types",
                "All existing tests pass",
                "Build succeeds with no warnings"
            ],
            "testCases": [],
            "priority": 2,
            "passes": false,
            "notes": "Simple export cleanup. No new tests needed - existing import tests will validate.",
            "dependencies": [
                "US-011"
            ]
        },
        {
            "id": "US-013",
            "title": "Simplify deduplication prompt - remove Identity Promotion section",
            "description": "Remove the Identity Promotion (Post-Merge) section from the deduplication agent prompt as this logic is no longer needed",
            "acceptanceCriteria": [
                "Identity Promotion (Post-Merge) section removed from src/atlas/src/atlas/llm/prompts/deduplication.md",
                "No references to identity promotion remain in the prompt",
                "No references to promotions field remain in the prompt",
                "Prompt remains valid markdown with proper structure",
                "All existing tests pass",
                "Build succeeds with no warnings"
            ],
            "testCases": [],
            "priority": 3,
            "passes": false,
            "notes": "Prompt file modification. No code tests needed - this is documentation/prompt content.",
            "dependencies": [
                "US-011"
            ]
        },
        {
            "id": "US-014",
            "title": "Simplify deduplication prompt - remove Staged Alignment section",
            "description": "Remove the Staged Alignment (Post-Merge) section from the deduplication agent prompt as this Phase 1 workaround is no longer needed after Phase 3 deployment",
            "acceptanceCriteria": [
                "Staged Alignment (Post-Merge) section removed from src/atlas/src/atlas/llm/prompts/deduplication.md",
                "No references to staged alignment remain in the prompt",
                "No references to alignments field remain in the prompt",
                "Prompt remains valid markdown with proper structure",
                "All existing tests pass",
                "Build succeeds with no warnings"
            ],
            "testCases": [],
            "priority": 4,
            "passes": false,
            "notes": "Prompt file modification. No code tests needed - this is documentation/prompt content.",
            "dependencies": [
                "US-013"
            ]
        },
        {
            "id": "US-015",
            "title": "Update deduplication prompt output format and example JSON",
            "description": "Update the output format description and example JSON in the deduplication prompt to remove references to promotions, alignments, and flagged_for_review fields",
            "acceptanceCriteria": [
                "Output format description no longer mentions promotions field",
                "Output format description no longer mentions alignments field",
                "Output format description no longer mentions flagged_for_review field",
                "Example JSON updated to not include promotions, alignments, or flagged_for_review",
                "Example JSON is valid JSON syntax",
                "Prompt remains valid markdown with proper structure",
                "All existing tests pass",
                "Build succeeds with no warnings"
            ],
            "testCases": [],
            "priority": 5,
            "passes": false,
            "notes": "Final prompt cleanup. Ensures the example output matches the simplified DeduplicationResult schema.",
            "dependencies": [
                "US-014"
            ]
        },
        {
            "id": "US-016",
            "title": "Verify no remaining references to removed types",
            "description": "Search the codebase and verify there are no remaining references to Promotion, Alignment, FlaggedForReview, promotions, alignments, or flagged_for_review that would cause runtime errors",
            "acceptanceCriteria": [
                "No Python imports reference Promotion, Alignment, or FlaggedForReview",
                "No code references promotions, alignments, or flagged_for_review attributes on DeduplicationResult",
                "No test files reference the removed types or fields",
                "All existing tests pass",
                "Build succeeds with no warnings",
                "No TODO or FIXME comments related to these removed types"
            ],
            "testCases": [
                "DeduplicationAgent_ProcessComponents_ShouldReturnResultWithoutRemovedFields - Integration test verifying agent returns valid DeduplicationResult without removed fields"
            ],
            "priority": 6,
            "passes": false,
            "notes": "Final validation story to ensure complete cleanup with no dangling references.",
            "dependencies": [
                "US-012",
                "US-015"
            ]
        }
    ]
}
